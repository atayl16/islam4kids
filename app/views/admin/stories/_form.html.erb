<div class="bg-white rounded-lg shadow-md p-8">
  <%= form_with model: [:admin, @story], local: true, class: 'space-y-6' do |form| %>
    <% if @story.errors.any? %>
      <div id="error_explanation" class="bg-red-50 border border-red-400 text-red-700 px-4 py-3 rounded">
        <h2 class="font-bold mb-2"><%= pluralize(@story.errors.count, "error") %> prohibited this story from being saved:</h2>
        <ul class="list-disc list-inside">
          <% @story.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="field">
      <%= form.label :title, class: 'block text-sm font-medium text-gray-700 mb-2' %>
      <%= form.text_field :title, class: 'w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent' %>
    </div>

    <div class="field">
      <%= form.label :summary, class: 'block text-sm font-medium text-gray-700 mb-2' %>
      <p class="text-xs text-gray-500 mb-2">Short summary shown on the index page (optional - will use content excerpt if not provided)</p>
      <%= form.text_area :summary, rows: 3, class: 'w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent', placeholder: 'A brief summary of the story...' %>
    </div>

    <div class="field">
      <%= form.label :content, class: 'block text-sm font-medium text-gray-700 mb-2' %>
      <%= form.text_area :content, rows: 15, class: 'w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent' %>
    </div>

    <div class="field">
      <%= form.label :status, class: 'block text-sm font-medium text-gray-700 mb-2' %>
      <%= form.select :status, options_for_select(Story.statuses.keys.map { |status| [status.humanize, status] }, @story.status), 
                      {}, class: 'w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent' %>
    </div>

    <div class="field">
      <%= form.label :header_image, class: 'block text-sm font-medium text-gray-700 mb-2' %>
      <div data-controller="clipboard-file">
        <div class="flex items-center gap-3 mb-2">
          <%= form.file_field :header_image, data: { clipboard_file_target: "input" }, class: 'flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent' %>
          <div data-clipboard-file-target="browseButton" data-action="click->clipboard-file#openFileDialog" class="px-4 py-2 bg-violet-600 hover:bg-violet-700 text-white rounded-md cursor-pointer font-medium transition-colors">
            Browse
          </div>
        </div>
        <div data-clipboard-file-target="dropZone" class="border-2 border-dashed border-violet-300 rounded-lg p-4 text-center hover:border-violet-500 transition-colors focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-violet-500" tabindex="0">
          <p class="text-sm text-violet-700 font-semibold">OR click here and press Ctrl+V / Cmd+V to paste from clipboard</p>
        </div>
        <div data-clipboard-file-target="feedback" class="hidden mt-2 p-3 bg-green-50 border border-green-200 rounded-lg text-green-800 text-sm font-medium"></div>
      </div>
    </div>

    <div class="actions">
      <%= form.submit class: 'bg-purple-500 hover:bg-purple-600 text-white px-6 py-2 rounded-md font-medium transition-colors cursor-pointer' %>
    </div>
  <% end %>
</div>
